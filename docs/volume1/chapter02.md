# 第2話　図書館での再会

　新学期三日目の放課後。僕は図書館の奥の席で、『Types and Programming Languages』という分厚い本と格闘していた。

　今日読んでいるのは、型推論の章だ。Hindley-Milner型システムの実装について、数式を追いながら理解を深めていく。エラーメッセージ改善ツールに型推論を組み込めば、もっと的確なエラー説明ができるはずだ。

「すみません、プログラミングの本はどの辺りにありますか？」

　図書館の静寂を破って、馴染みのある声が響いた。

　僕は反射的に顔を上げる。カウンターで司書の先生と話しているのは――美月だった。

　司書の先生が本棚を指差すと、美月はお礼を言って歩き始めた。そして僕を見つけた瞬間、その表情が明るくなった。

「あ、拓海先輩」

　美月は嬉しそうに僕の方に歩いてきた。

「美月。本を探してたの？」

「はい。Rustの本を探してて」

　美月は僕の斜向かいの席に座った。その手には『プログラミングRust』が握られている。

「本当にRust勉強する気なんだ」

「はい。拓海先輩のツール、コード読んでみたくて」

　美月の真剣な表情に、僕は少し驚いた。

「でも、Rustは最初のハードルが高いよ。所有権とか借用とか」

「大丈夫です。むしろ、メモリ安全性を言語レベルで保証するって面白そう」

　美月の返答に、僕はさらに驚いた。単なる興味本位じゃない。ちゃんと言語の特徴を理解した上で学ぼうとしている。

「あ、その本」

　美月が僕の読んでいる本に気づいた。

「Pierce の TAPL ですね。型理論の名著」

「知ってるの？」

「名前だけは。でも、難しそうで手が出せなくて」

「確かに難しいけど、面白いよ。型システムの数学的な基礎が分かる」

　僕はノートを開いて、さっきまで書いていた型推論のアルゴリズムを見せた。

```
Γ ⊢ e1 : τ1 → τ2    Γ ⊢ e2 : τ1
--------------------------------- (App)
      Γ ⊢ e1 e2 : τ2
```

「これは関数適用の型付け規則。e1が関数型で、e2がその引数の型と一致すれば、全体の型は返り値の型になる」

「なるほど……数学的に型を扱うんですね」

　美月は興味深そうにノートを見つめた。

「これをプログラムで実装すると、型エラーを検出できる。しかも、どこで型が合わないかも正確に分かる」

「それで、エラーメッセージを改善できるんですね」

「そう。例えば『型が合いません』じゃなくて、『文字列型の変数に数値を代入しようとしています』みたいに」

　美月は感心したように頷いた。

「ところで、美月はどんなプログラムを書いてるの？」

「最近はWebアプリが多いです。ReactとTypeScriptで」

「TypeScript！型があるJavaScriptだね」

「はい。型のおかげでバグが減って、開発が楽になりました」

　美月はカバンからノートPCを取り出した。

「実は、ポートフォリオサイトを作ってるんです」

　画面には、洗練されたデザインのWebサイトが表示されていた。レスポンシブデザインで、アニメーションも滑らか。

「すごい……プロのサイトみたい」

「ありがとうございます。UI/UXの勉強もしてるんです」

　コードを見せてもらうと、きれいに整理されたTypeScriptのコードが並んでいた。型定義もしっかりしていて、コンポーネントの設計も理にかなっている。

「美月のコード、読みやすいね」

「本当ですか？」

「うん。変数名も分かりやすいし、関数も適切に分割されてる」

　褒められて、美月は少し照れたような表情を見せた。

「実は、拓海先輩のコードを参考にしてるんです。GitHubで公開されてるやつ」

「え、僕のコード？」

「はい。特にエラーハンドリングの部分とか、すごく勉強になりました」

　美月が僕のコードを読み込んでいることに、なんだか嬉しくなった。

「そうだ、今度ペアプロしない？」

　思わず提案していた。

「ペアプログラミングですか？」

「うん。お互いのコードレビューもできるし、一緒に何か作るのも面白いかも」

「いいですね！ぜひ」

　美月の即答に、僕の心が躍った。

　時計を見ると、もう五時を過ぎていた。

「そろそろ帰ろうか」

「そうですね」

　図書館を出ると、夕方の風が心地よかった。

「美月、今週末時間ある？」

「土曜日なら大丈夫です」

「じゃあ、土曜日にペアプロしよう。場所は……」

「うちでもいいですよ。静かですし」

「いいの？」

「はい。お母さんも拓海先輩なら大歓迎だと思います」

　美月の家でプログラミング。なんだか特別な感じがする。

　家までの道すがら、技術的な話題で盛り上がった。

「最近、Wasmも面白そうだなって思ってて」

「WebAssembly！ブラウザでネイティブ並みの速度」

「そう。Rustで書いたパーサーをブラウザで動かせたら」

「それ、すごくいいアイデアです！」

　美月との会話は本当に楽しい。技術的な話が通じる相手がこんなに近くにいたなんて。

　桜月堂の前で立ち止まる。

「じゃあ、土曜日」

「はい。楽しみにしてます」

　美月は笑顔で手を振って、店の中に入っていった。

　家に帰ってから、僕は美月のGitHubアカウントを見つけた。公開されているリポジトリを見ると、想像以上にしっかりとしたコードが並んでいた。

　コミット履歴も丁寧で、プルリクエストの説明も分かりやすい。これは本当にAtCoder水色レベルの実力だ。

　土曜日が待ち遠しい。美月と一緒にコードを書く。それがこんなにワクワクすることだなんて、想像もしていなかった。