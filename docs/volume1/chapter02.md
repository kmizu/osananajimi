# 第2話 図書館の型理論

新学期が始まって三日目の放課後。僕は図書館の奥、情報科学の専門書が並ぶ一角で、一冊の洋書と格闘していた。『Types and Programming Languages』、通称TAPL。型理論のバイブルだ。

今日、僕が挑んでいるのは、Hindley-Milner型推論の章。数式とラムダ計算が織りなす、静的型付け言語の心臓部だ。僕のエラーメッセージ改善ツールに、この美しい理論を実装できれば、型エラーの文脈をより深く理解し、的確な修正案を提示できるはずだ。

「すみません、プログラミング言語のコーナーはどこですか？」

静寂を破ったその声に、僕は顔を上げた。カウンターで司書に尋ねているのは、美月だった。

彼女は僕の存在に気づくと、ぱっと表情を輝かせ、僕の隣の席に静かに腰を下ろした。その手には、オライリーの『プログラミングRust』が握られている。

「本当にRustを勉強するんだ」

「はい。拓海先輩のコードを、ちゃんと理解したいので」

その真剣な眼差しに、僕は胸が熱くなるのを感じた。

「その本、もしかして…」美月が僕の読んでいるTAPLに気づいた。「Pierceの有名な本ですね。型理論の…」

「知ってるの？」

「名前だけは。でも、数学的すぎて手が出ませんでした」

「確かに難しい。でも、その分、言語の動作原理が深く理解できるんだ」僕はノートを開き、書き留めていた型付け規則を見せた。

```
Γ ⊢ e₁ : τ₁ → τ₂      Γ ⊢ e₂ : τ₁
――――――――――――――――――――――――― (App)
        Γ ⊢ e₁ e₂ : τ₂
```

「これは関数適用の規則。関数e₁が引数e₂を受け取った時の型を定義している。このルールを再帰的に適用することで、プログラム全体の型安全性が保証されるんだ」

「数学の証明みたい…」美月は興味深そうに数式を追った。「これを実装すると、コンパイラは型エラーの根本原因を特定できるんですね」

「その通り。『型が合いません』という曖昧なエラーではなく、『String型を期待する関数に、Integer型の値が渡されています』と、具体的な場所と理由を提示できる」

感心したように頷く美月に、僕は尋ねた。

「美月は、どんなプログラムを？」

「最近はWebアプリが多いです。ReactとTypeScriptで、自分のポートフォリオサイトを作っていて」

美月がノートPCを開くと、そこに現れたのは、洗練されたデザインのウェブサイトだった。UI/UXにも配慮が行き届いており、アニメーションは滑らかで心地よい。コードを見せてもらうと、コンポーネントは適切に分割され、型定義も驚くほど丁寧だった。

「このコード、すごく読みやすい。僕の書くRustより、ずっとエレガントだ」

「そんなことないです！ 実は、拓海先輩のGitHubのコードを参考に、リファクタリングしたんです。特にエラーハンドリングの設計思想は、本当に勉強になりました」

僕のコードが、彼女の成長に繋がっている。その事実が、たまらなく嬉しかった。

「そうだ、今度の週末、ペアプロしないか？」僕は思わず提案していた。「二人で一緒に、何か新しい機能を作ってみるんだ」

「ペアプログラミング！ 是非お願いします！」

美月の即答に、僕の心は躍った。

「土曜日、うちに来ませんか？ 静かな環境で集中できると思います」

美月の家で、二人きりでプログラミング。その響きは、僕にとって特別な意味を持っていた。

図書館を出ると、夕暮れの光が僕たちを包んでいた。技術的な探求と、共有できる喜び。美月となら、どこまでも深く潜っていける。そんな確信があった。

家に帰り、美月のGitHubアカウントを改めて訪れた。そこには、彼女がWebの世界で築き上げてきた、美しく、力強いコードたちが並んでいた。コミットログの一つ一つが、彼女の真摯な学びの軌跡を物語っている。

土曜日が、待ち遠しくてたまらなかった。美月という最高のパートナーと、どんな化学反応が起きるのか。僕の胸は、期待で大きく膨らんでいた。
