# 第7話　勉強会

　水曜日の放課後、僕は美月と図書館にいた。文化祭の展示開発を本格的に始める前に、技術的な部分を整理しておきたかった。

「今日はRustの基礎から？」

「うん。所有権の概念が分かれば、あとは応用だから」

　僕たちは奥の静かな席に座って、ノートPCを開いた。

「まず、Rustが解決したい問題から説明するね」

　ホワイトボードに図を描きながら説明を始める。

「メモリ安全性の問題。CやC++では、メモリの解放忘れとか、二重解放とか」

「セグフォの原因ですね」

「そう。Rustはコンパイル時にこれらを防ぐ」

　美月は真剣にメモを取っている。

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1;  // 所有権がs2に移動
    // println!("{}", s1);  // コンパイルエラー
}
```

「所有権が移動すると、元の変数は使えなくなる」

「なるほど。だから安全なんですね」

「借用という仕組みもある」

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = &s1;  // 借用
    println!("{}, {}", s1, s2);  // OK
}
```

「参照なら元の変数も使える」

「JavaScriptの参照とは違うんですね」

「うん。もっと厳密。可変参照は同時に一つだけとか」

　説明しながら、美月の理解の速さに感心する。概念を掴むのが早い。

「実際にコード書いてみる？」

「はい」

　美月がVSCodeを開いて、簡単なプログラムを書き始めた。

```rust
fn greet(name: &str) -> String {
    format!("Hello, {}!", name)
}

fn main() {
    let name = "美月";
    let message = greet(name);
    println!("{}", message);
}
```

「お、いいね。文字列スライスも理解してる」

「&strとStringの違い、調べておきました」

　美月の予習の成果に驚く。自主的に学習を進めている。

「じゃあ、次はエラーハンドリング」

「Result型ですね」

「そう。Rustらしい部分の一つ」

```rust
fn parse_number(s: &str) -> Result<i32, std::num::ParseIntError> {
    s.parse()
}

fn main() {
    match parse_number("42") {
        Ok(n) => println!("Parsed: {}", n),
        Err(e) => println!("Error: {}", e),
    }
}
```

「エラーも値として扱う」

「例外じゃなくて、明示的に」

「そう。だからエラー処理を忘れにくい」

　二時間ほど、Rustの基礎を一緒に学んだ。美月は時々鋭い質問をしてきて、僕も改めて理解を深めることができた。

「ライフタイムはまだ難しいです」

「最初はみんなそう。使ってるうちに分かってくる」

「拓海先輩も苦労しました？」

「めちゃくちゃ苦労した。コンパイラと格闘の日々」

　美月が笑った。

「でも、今は使いこなしてる」

「慣れだよ。美月ならすぐマスターできる」

　図書館を出ると、もう夕方だった。

「Rust、面白いですね」

「でしょ？安全性と性能を両立してる」

「パーサーの実装も見てみたいです」

「今度、詳しく説明するよ」

　一緒に帰りながら、技術的な話が尽きない。

「あ、そういえば」

　美月が思い出したように言った。

「今週末、また勉強会しませんか？」

「いいよ。どこで？」

「うちでもいいですし、どこかカフェでも」

「美月の家がいいな。集中できるし」

「分かりました」

　美月の嬉しそうな表情を見て、僕も嬉しくなった。

　家に帰ってから、今日の勉強会を振り返る。美月と一緒に学ぶ時間は、ただの勉強以上の意味がある気がした。

　お互いに教え合い、理解を深め合う。そんな関係が、とても心地よい。

　週末の勉強会では、実際にパーサーのコードを一緒に書いてみよう。美月の成長速度なら、きっとすぐに理解してくれるはずだ。

　GitHubを見ると、美月が今日学んだ内容をまとめたリポジトリを作っていた。丁寧にコメントされたサンプルコードと、理解のポイントがまとめられている。

　こういう几帳面さも、美月の魅力の一つだ。技術に対して真摯で、常に成長しようとしている。

　そんな美月と一緒に文化祭の展示を作れることが、改めて楽しみになった。